"use strict";!function(){window.qs=function(e,n){return(n||document).querySelector(e)},window.$on=function(e,n,i,r){e.addEventListener(n,i,!!r)},window.$parent=function(e,n){return e.parentNode?e.parentNode.tagName.toLowerCase()===n.toLowerCase()?e.parentNode:window.$parent(e.parentNode,n):void 0},window.$createImgSource=function(e){return"https://farm"+e.farm+".staticflickr.com/"+e.server+"/"+e.id+"_"+e.secret+".jpg"},window.$each=function(e,n){if(Array.isArray(e))for(var i=0;i<e.length;i++)n(e[i],i,e);else for(var r in e)({}).hasOwnProperty.call(e,r)&&n(e[r],r,e)},window.$map=function(e,n){var i=[];return window.$each(e,function(e){i.push(n(e))}),i}}(window);var Grid=function(){var e=function(e,n){fetch("https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=851eba61830c7c59ab64308b75eec2f7&tags="+e+"%2C+film&sort=relevance&per_page=10&page=1&format=json&nojsoncallback=1").then(function(e){return e.json()}).then(function(e){n(e)})},n=function(e){return e.reduce(function(e,n){return e[n.id]=n,e[n.id].src=window.$createImgSource(n),e},{})},i=function(e){for(;e.firstChild;)e.removeChild(e.firstChild);e.textContent=""},r=function(e){i(window.qs("main")),window.$each(e,function(e){var n=document.createElement("div");n.className="grid-image-container";var i=document.createElement("div");i.className="grid-image",i.style.backgroundImage="url("+e.src+")",n.appendChild(i),n.setAttribute("data-image-id",e.id),window.$on(n,"click",function(){window.location="#openModal"}),window.qs("main").appendChild(n)})};return{fetchImages:e,removeImages:i,reduceImages:n,renderImages:r}},Emulsion=function(){var e={modalOpen:!1,images:null,availFilmTypes:["ektar","portra","tri-x","superia","velvia"],filmType:null,filmIndex:null},n=window.Grid(),i=function(n,i,r){e[n]=i,void 0!==r&&r(i)},r=function(){return e},t=function(){n.fetchImages(e.filmType,function(r){i("images",n.reduceImages(r.photos.photo),function(){n.renderImages(e.images)})})};if(null===e.images&&null===e.filmType){e.images={};var a=0;e.filmType=e.availFilmTypes[a],e.filmIndex=a,t()}var o=function(){window.qs("#current-film").innerHTML=e.filmType},c=function(){var r=null,a=0;void 0!==e.availFilmTypes[e.filmIndex+1]?(r=e.availFilmTypes[e.filmIndex+1],a=e.filmIndex+1):r=e.availFilmTypes[a],i("filmType",r),i("filmIndex",a,function(){t(),n.renderImages(e.images),o()})};return o(),{getState:r,advanceFilm:c}}(),init=function(){var e=window.Emulsion;window.$on(window.qs("#next-film-arrow"),"click",e.advanceFilm)}();