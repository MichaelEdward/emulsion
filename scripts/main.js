"use strict";!function(){window.qs=function(e,i){return(i||document).querySelector(e)},window.$on=function(e,i,n,t){e.addEventListener(i,n,!!t)},window.$parent=function(e,i){return e.parentNode?e.parentNode.tagName.toLowerCase()===i.toLowerCase()?e.parentNode:window.$parent(e.parentNode,i):void 0},window.$createImgSource=function(e){return"https://farm"+e.farm+".staticflickr.com/"+e.server+"/"+e.id+"_"+e.secret+".jpg"},window.$addClass=function(e,i){e.classList?e.classList.add(i):e.className+=" ${className}"},window.$removeClass=function(e,i){e.classList?e.classList.remove(i):e.className=e.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," ")},window.$renderOverlay=function(e){var i=window.qs(".lightbox-image");i.setAttribute("src",e)},window.$debounce=function(e,i){var n=null;return function(){var t=this,a=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(t,a)},i)}},window.$GET=function(e,i){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onload=function(){if(n.status>=200&&n.status<400){var e=JSON.parse(n.responseText);i(e)}},n.onerror=function(e){console.err(e)},n.send()}}(window);var filmText=function(){var e="Kodak Ektar is often considered one of the world's finest grain\n  color negative films. Photographs shot with Ektar often have little noise due\n  to its low ISO speed (100). The colors are ultra-vivid, shots are exceptionally\n  sharp, and the film is ideal for modern-day scanning. It's use cases are\n  typically with nature and travel photography.",i="Kodak's Portra series is a daylight-balanced professional color\n  negative film. As its name suggests, it is intended for portrait use. Available\n  in 3 different film speeds, the Portra line is expensive, but takes its cues from\n  Kodak's motion picture film.",n="A living classic, the Kodak Tri-X film has been in production since 1940.\n  It's a true black-and-white film, and remains the world's best seller. It has\n  a tremendously versatile exposure latitude and a classic grain structure - in fact,\n  Tri-X is what contributes to most people's notion of \"film-like grain\". It pushed an era\n  of photojournalism forward!",t="Fujifilm's Superia is a popular line available in a variety of speeds,\n  ranging from 100 - 1600 ISO. Originally intended for typical point and shoot cameras,\n  the film has proven successful with enthusiasts. The saturated colors and lower price point\n  make it a popular go-to choice for the average film photographer who needs color.",a="Fujifilm Velvia is unique - it's slide film - meaning that\n  the photographs you take, if you were to look at the processed film, results in\n  a positive image. Velvia is iconic for it's extreme color pop - strong, bold, and\n  saturated colors. The look is very distinct, but the slower speed of the film makes\n  it better for bright sunny days.",o="The Fujifilm Pro 400H is often used at weddings, but is also\n  popular with street photography. The amazing exposure latitude means the photographer\n  can shoot with a heavy mix of lights and darks. Color rendition is quite neutral,\n  and it works well in indoor lighting. Due to it's 4th emulsion layer, it's a bit\n  more expensive to produce - hence more cost prohibitive.";return{ektar:e,portra:i,"tri-x":n,superia:t,velvia:a,"pro 400h":o}},Grid=function(){var e=function(e,i){window.$GET("https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=851eba61830c7c59ab64308b75eec2f7&tags="+e+"%2C+film&sort=relevance&per_page=9&page=1&format=json&nojsoncallback=1",i)},i=function(e){return e.map(function(e){return e.src=window.$createImgSource(e),e})},n=function(e){for(;e.firstChild;)e.removeChild(e.firstChild);e.textContent=""},t=function(e,i){var t=window.filmText();n(window.qs("main")),e.forEach(function(e){var i=document.createElement("div");i.className="grid-image-container";var n=document.createElement("div");n.className="grid-image",n.style.backgroundImage="url("+e.src+")",i.appendChild(n),i.setAttribute("data-image-id",e.id),window.$on(i,"click",function(e){var i=e.target?e.target:e.srcElement;i.dispatchEvent(window.$stateEvent("openModal")),window.$addClass(window.qs(".overlay"),"is-open")}),window.qs("main").appendChild(i)});var a=document.createElement("div");a.className="grid-film-description",a.innerHTML='<p id="grid-film-description-inner">'+t[i]+"</p>",window.qs("main").appendChild(a)};return{fetchImages:e,mapImages:i,removeImages:n,renderImages:t}},Emulsion=function(){var e={modalOpen:!1,images:null,lightbox:null,currFilmType:"ektar",currFilmIndex:"0",availFilmTypes:["ektar","portra","tri-x","superia","velvia","pro 400h"]},i=window.Grid(),n=function(i,n,t){e[i]=n,void 0!==t&&t(n)},t=function(i){return void 0===i?e:e[i]},a=function(){i.fetchImages(e.currFilmType,function(a){n("images",i.mapImages(a.photos.photo),function(){i.renderImages(e.images,t("currFilmType"))})})},o=function(){window.qs("#current-film").innerHTML=e.currFilmType},r=function(){var r=null,s=0;void 0!==e.availFilmTypes[e.currFilmIndex+1]?(r=e.availFilmTypes[e.currFilmIndex+1],s=e.currFilmIndex+1):r=e.availFilmTypes[s],n("currFilmType",r),n("currFilmIndex",s,function(){a(),i.renderImages(e.images,t("currFilmType")),o()})},s=function(e,i){var a=t("images").reduce(function(i,n,t){return n.id===e?t:null!==i?i:void 0},null);switch(i){case"prevImage":n("lightbox",t("lightbox")-1);break;case"nextImage":n("lightbox",t("lightbox")+1);break;case"openModal":n("lightbox",a);break;case"closeModal":n("lightbox",null)}t("lightbox")+1===t("images").length?(window.$addClass(window.qs(".overlay-right"),"is-disabled"),window.$removeClass(window.qs(".overlay-left"),"is-disabled")):0===t("lightbox")?(window.$addClass(window.qs(".overlay-left"),"is-disabled"),window.$removeClass(window.qs(".overlay-right"),"is-disabled")):(window.$removeClass(window.qs(".overlay-right"),"is-disabled"),window.$removeClass(window.qs(".overlay-left"),"is-disabled"))};o(),a();var l=window.qs(".app-container");return window.$on(l,"stateChange",function(e){switch(e.detail.action){case"nextImage":s(null,"nextImage"),window.$renderOverlay(t("images")[t("lightbox")].src);break;case"prevImage":s(null,"prevImage"),window.$renderOverlay(t("images")[t("lightbox")].src);break;case"closeModal":n("modalOpen",!1),n("lightbox",null);break;case"openModal":var i=e.target?e.target:e.srcElement,a=i.parentElement.attributes["data-image-id"].value;n("modalOpen",!0),s(a,"openModal"),window.$renderOverlay(t("images").find(function(e){return e.id===a}).src)}console.log("Action Type: "+e.detail.action),console.log(t())}),{getState:t,nextFilmType:r}}(),init=function(){var e=window.Emulsion;window.$on(window.qs("#next-film-arrow"),"click",e.nextFilmType);var i=window.qs(".overlay"),n=window.qs(".modal-close-btn");window.$on(n,"click",function(e){var n=e.target?e.target:e.srcElement;n.dispatchEvent(window.$stateEvent("closeModal")),window.$removeClass(i,"is-open")});var t=window.qs(".overlay-right");window.$on(t,"click",function(e){var i=e.target?e.target:e.srcElement;i.dispatchEvent(window.$stateEvent("nextImage"))});var a=window.qs(".overlay-left");window.$on(a,"click",function(e){var i=e.target?e.target:e.srcElement;i.dispatchEvent(window.$stateEvent("prevImage"))}),window.$stateEvent=function(i,n){return new CustomEvent("stateChange",{detail:{action:i,callback:n,state:e.getState(),time:new Date},bubbles:!0,cancelable:!0})}}();